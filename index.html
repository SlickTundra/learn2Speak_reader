<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Learn2Speak ‚Äì Lecteur de texte IA</title>
  <meta name="description" content="Convertis ton texte en audio dans plusieurs langues gr√¢ce aux voix de ton navigateur.">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">

  <style>
    :root {
      --primary: #004aad;
      --primary-soft: #e5f0ff;
      --bg: #f5f7fb;
      --text: #1f2933;
      --radius-lg: 18px;
      --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.08);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: linear-gradient(135deg, #f5f7fb 0%, #e8f0ff 50%, #f5f7fb 100%);
      color: var(--text);
    }

    .page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 24px 16px 40px;
    }

    .header {
      max-width: 960px;
      width: 100%;
      margin-bottom: 20px;
    }

    .logo-text {
      font-weight: 700;
      font-size: 1.1rem;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      color: var(--primary);
    }

    .tagline {
      margin-top: 4px;
      font-size: 0.9rem;
      color: #4b5563;
    }

    .hero-title {
      margin-top: 16px;
      font-size: clamp(1.6rem, 3vw, 2.1rem);
      font-weight: 700;
      color: #111827;
    }

    .hero-subtitle {
      margin-top: 8px;
      color: #6b7280;
      max-width: 640px;
      font-size: 0.98rem;
    }

    .card {
      max-width: 960px;
      width: 100%;
      margin-top: 20px;
      background: #ffffff;
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
      padding: 20px;
      display: grid;
      grid-template-columns: minmax(0, 1.5fr) minmax(0, 1fr);
      gap: 20px;
    }

    @media (max-width: 800px) {
      .card {
        grid-template-columns: 1fr;
      }
    }

    .section-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 8px;
      color: #111827;
    }

    .section-hint {
      font-size: 0.85rem;
      color: #6b7280;
      margin-bottom: 12px;
    }

    textarea {
      width: 100%;
      min-height: 210px;
      resize: vertical;
      border-radius: 12px;
      border: 1px solid #d1d5db;
      padding: 12px 14px;
      font-size: 0.98rem;
      font-family: inherit;
      line-height: 1.5;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }

    textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 1px var(--primary-soft);
    }

    .language-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin: 8px 0 10px;
    }

    .lang-pill {
      padding: 6px 12px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      background: #f9fafb;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.18s ease;
    }

    .lang-pill:hover {
      border-color: var(--primary);
      background: #eef3ff;
    }

    .lang-pill.active {
      background: var(--primary);
      color: #ffffff;
      border-color: var(--primary);
    }

    .control-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      margin-top: 10px;
    }

    .select-wrapper {
      flex: 1 1 180px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    select {
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      font-size: 0.9rem;
      background: #f9fafb;
      font-family: inherit;
    }

    .slider-wrapper {
      flex: 1 1 180px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 0.85rem;
    }

    input[type="range"] {
      width: 100%;
    }

    .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 14px;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 9px 18px;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: transform 0.12s ease, box-shadow 0.12s ease, background 0.12s ease;
    }

    .btn-primary {
      background: var(--primary);
      color: #ffffff;
      box-shadow: 0 12px 25px rgba(0, 74, 173, 0.35);
    }

    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 35px rgba(0, 74, 173, 0.4);
    }

    .btn-secondary {
      background: #eef2ff;
      color: #111827;
    }

    .btn-secondary:hover {
      background: #e0e7ff;
    }

    .btn-ghost {
      background: transparent;
      color: #6b7280;
      border: 1px solid #e5e7eb;
    }

    .btn-ghost:hover {
      background: #f9fafb;
    }

    .status-bar {
      margin-top: 10px;
      font-size: 0.8rem;
      color: #6b7280;
    }

    .status-ok {
      color: #059669;
    }

    .status-warn {
      color: #d97706;
    }

    .side-panel {
      border-radius: 16px;
      background: var(--primary-soft);
      padding: 16px 14px;
      font-size: 0.86rem;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .side-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: #ffffff;
      font-size: 0.76rem;
      color: #4b5563;
      border: 1px solid rgba(0, 74, 173, 0.08);
      width: fit-content;
    }

    .side-list {
      list-style: none;
      padding-left: 0;
      margin: 0;
    }

    .side-list li {
      display: flex;
      gap: 6px;
      margin-bottom: 6px;
      align-items: flex-start;
    }

    .side-list span.bullet {
      font-size: 0.9rem;
      margin-top: 1px;
    }

    .footer-note {
      max-width: 960px;
      width: 100%;
      margin-top: 18px;
      font-size: 0.8rem;
      color: #6b7280;
      text-align: right;
    }
  </style>
</head>
<body>
  <div class="page">
    <header class="header">
      <div class="logo-text">LEARN2SPEAK ACADEMY</div>
      <p class="tagline">Anglais | Espagnol | Italien | Allemand | Russe | Fran√ßais</p>
      <h1 class="hero-title">Lis ton texte √† voix haute, comme un coach de langues.</h1>
      <p class="hero-subtitle">
        Colle ton texte, choisis la langue et la voix, puis ajuste la vitesse. Id√©al pour
        t‚Äôentra√Æner √† la prononciation et √† l‚Äô√©coute, en autonomie.
      </p>
    </header>

    <main class="card">
      <!-- Zone gauche : texte + contr√¥les -->
      <section>
        <h2 class="section-title">1. Colle ton texte</h2>
        <p class="section-hint">Tu peux √©crire en n‚Äôimporte quelle langue, mais choisis ci-dessous la langue de la voix.</p>
        <textarea id="textInput" placeholder="Exemple : Bonjour, je m‚Äôappelle Christophe et j‚Äôapprends le russe avec Learn2Speak."></textarea>

        <h2 class="section-title" style="margin-top: 14px;">2. Choisis la langue de la voix</h2>
        <div class="language-pills" id="languagePills">
          <button class="lang-pill active" data-lang="en">Anglais</button>
          <button class="lang-pill" data-lang="es">Espagnol</button>
          <button class="lang-pill" data-lang="it">Italien</button>
          <button class="lang-pill" data-lang="de">Allemand</button>
          <button class="lang-pill" data-lang="ru">Russe</button>
          <button class="lang-pill" data-lang="fr">Fran√ßais</button>
        </div>

        <div class="control-row">
          <div class="select-wrapper">
            <label for="voiceSelect">Voix disponible</label>
            <select id="voiceSelect">
              <option>Chargement des voix‚Ä¶</option>
            </select>
          </div>

          <div class="slider-wrapper">
            <label for="rateSlider">
              Vitesse de lecture
              <span id="rateValue">1.0√ó</span>
            </label>
            <input id="rateSlider" type="range" min="0.6" max="1.8" step="0.1" value="1">
          </div>
        </div>

        <div class="buttons">
          <button class="btn btn-primary" id="playBtn">
            ‚ñ∂ √âcouter
          </button>
          <button class="btn btn-secondary" id="pauseBtn">
            ‚è∏ Pause
          </button>
          <button class="btn btn-ghost" id="stopBtn">
            ‚èπ Stop
          </button>
        </div>

        <div class="status-bar" id="statusBar">
          ‚úÖ Pr√™t √† lire. V√©rifie que le son de ton appareil est activ√©.
        </div>
      </section>

      <!-- Zone droite : explications style Learn2Speak -->
      <aside class="side-panel">
        <div class="side-pill">
          üéß Pratique guid√©e
        </div>
        <h3 style="margin: 0; font-size: 0.95rem; color:#111827;">
          Comment utiliser cet outil comme un vrai entra√Ænement ?
        </h3>
        <ul class="side-list">
          <li>
            <span class="bullet">1.</span>
            <span>√âcris ou colle un texte que tu utiliserais en vrai (voyage, travail, conversation).</span>
          </li>
          <li>
            <span class="bullet">2.</span>
            <span>Choisis la langue <strong>de la voix</strong> (Anglais, Espagnol, Italien, Allemand, Russe ou Fran√ßais).</span>
          </li>
          <li>
            <span class="bullet">3.</span>
            <span>√âcoute une premi√®re fois, puis r√©p√®te apr√®s la voix pour travailler ta fluidit√©.</span>
          </li>
          <li>
            <span class="bullet">4.</span>
            <span>Joue avec la vitesse : commence lentement, puis rapproche-toi du rythme naturel.</span>
          </li>
        </ul>
        <p style="margin: 4px 0 0; color:#4b5563;">
          üí° En coaching Learn2Speak, on va encore plus loin : on adapte les textes √† ton
          profil et √† tes projets concrets.
        </p>
      </aside>
    </main>

    <div class="footer-note">
      Certaines voix d√©pendent de ton navigateur et de ton syst√®me (Chrome, Edge, etc.).
    </div>
  </div>

  <script>
    (function() {
      const textInput = document.getElementById('textInput');
      const playBtn = document.getElementById('playBtn');
      const pauseBtn = document.getElementById('pauseBtn');
      const stopBtn = document.getElementById('stopBtn');
      const voiceSelect = document.getElementById('voiceSelect');
      const rateSlider = document.getElementById('rateSlider');
      const rateValue = document.getElementById('rateValue');
      const statusBar = document.getElementById('statusBar');
      const languagePills = document.getElementById('languagePills');

      let voices = [];
      let currentLangCode = 'en';
      let currentUtterance = null;
      let isPaused = false;

      const LANGUAGE_PREFIXES = {
        en: ['en'],
        es: ['es'],
        it: ['it'],
        de: ['de'],
        ru: ['ru'],
        fr: ['fr']
      };

      function setStatus(message, type = 'ok') {
        statusBar.textContent = message;
        statusBar.classList.remove('status-ok', 'status-warn');
        statusBar.classList.add(type === 'ok' ? 'status-ok' : 'status-warn');
      }

      function loadVoices() {
        voices = window.speechSynthesis.getVoices();
        populateVoiceList();
      }

      function populateVoiceList() {
        const prefixes = LANGUAGE_PREFIXES[currentLangCode] || [];
        const filtered = voices.filter(v =>
          prefixes.some(prefix => v.lang.toLowerCase().startsWith(prefix.toLowerCase()))
        );

        voiceSelect.innerHTML = '';

        const listToUse = filtered.length ? filtered : voices;

        if (!listToUse.length) {
          const opt = document.createElement('option');
          opt.textContent = 'Aucune voix disponible (ton navigateur ne supporte pas cette API)';
          voiceSelect.appendChild(opt);
          setStatus('Ton navigateur ne semble pas supporter la synth√®se vocale.', 'warn');
          return;
        }

        listToUse.forEach((voice, index) => {
          const option = document.createElement('option');
          option.value = voice.name;
          option.textContent = `${voice.name} (${voice.lang})${voice.default ? ' ‚Äî par d√©faut' : ''}`;
          if (index === 0) option.selected = true;
          voiceSelect.appendChild(option);
        });

        const langLabel = {
          en: 'anglais',
          es: 'espagnol',
          it: 'italien',
          de: 'allemand',
          ru: 'russe',
          fr: 'fran√ßais'
        }[currentLangCode] || currentLangCode;

        setStatus(`Voix charg√©es pour le ${langLabel}.`, 'ok');
      }

      function getSelectedVoice() {
        const name = voiceSelect.value;
        return voices.find(v => v.name === name) || null;
      }

      function speak() {
        if (!('speechSynthesis' in window)) {
          setStatus("La synth√®se vocale n'est pas support√©e par ce navigateur.", 'warn');
          return;
        }

        const text = textInput.value.trim();
        if (!text) {
          setStatus('Ajoute un texte avant de lancer la lecture.', 'warn');
          textInput.focus();
          return;
        }

        window.speechSynthesis.cancel();
        currentUtterance = new SpeechSynthesisUtterance(text);

        const voice = getSelectedVoice();
        if (voice) {
          currentUtterance.voice = voice;
        }

        currentUtterance.rate = parseFloat(rateSlider.value);

        currentUtterance.onstart = () => {
          isPaused = false;
          setStatus('Lecture en cours‚Ä¶', 'ok');
        };

        currentUtterance.onend = () => {
          isPaused = false;
          setStatus('Lecture termin√©e. Tu peux relancer ou ajuster le texte.', 'ok');
        };

        currentUtterance.onerror = () => {
          isPaused = false;
          setStatus("Une erreur s'est produite pendant la lecture.", 'warn');
        };

        window.speechSynthesis.speak(currentUtterance);
      }

      function pause() {
        if (!window.speechSynthesis.speaking) return;
        if (!isPaused) {
          window.speechSynthesis.pause();
          isPaused = true;
          setStatus('Lecture en pause.', 'warn');
        } else {
          window.speechSynthesis.resume();
          isPaused = false;
          setStatus('Lecture reprise.', 'ok');
        }
      }

      function stop() {
        if (!window.speechSynthesis.speaking && !isPaused) return;
        window.speechSynthesis.cancel();
        isPaused = false;
        setStatus('Lecture arr√™t√©e.', 'warn');
      }

      rateSlider.addEventListener('input', () => {
        rateValue.textContent = rateSlider.value + '√ó';
      });

      playBtn.addEventListener('click', speak);
      pauseBtn.addEventListener('click', pause);
      stopBtn.addEventListener('click', stop);

      languagePills.addEventListener('click', (e) => {
        const btn = e.target.closest('.lang-pill');
        if (!btn) return;

        document.querySelectorAll('.lang-pill').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentLangCode = btn.dataset.lang || 'en';
        populateVoiceList();
      });

      if ('speechSynthesis' in window) {
        loadVoices();
        if (typeof speechSynthesis.onvoiceschanged !== 'undefined') {
          speechSynthesis.onvoiceschanged = loadVoices;
        }
      } else {
        setStatus("La synth√®se vocale n'est pas support√©e par ce navigateur.", 'warn');
      }
    })();
  </script>
</body>
</html>
